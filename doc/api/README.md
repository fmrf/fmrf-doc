# fmrf-api 文档


## 主要技术

+ HTTP/2 (https)

+ GraphQL

+ WebSocket (wss)


## 权限角色
访问 fmrf-api (fmrf-server) 的权限角色 (APPMAC).

+ **`pa`** (primary admin): 主管理员.
  通常为人类用户.
  主管理员对系统具有最高权限, 能够进行全部操作.
  系统允许存在多个主管理员账号, 多个主管理员账号之间完全平等, 都能够对所有账号进行账号管理.
  主管理员不能对系统进行一些底层操作, 这些操作必须登录主机进行, 比如关闭系统, 删除日志/历史记录等.
  主管理员包含完全观察者权限.
  用户不能直接登录为主管理员, 必须首先登录为观察者, 然后通过切换角色功能提权.
  切换为主管理员需要双因素认证, 比如口令 + 指纹, 且具有时效性, 超时自动失效.

+ **`sa`** (secondary admin): 次管理员.
  通常为人类用户.
  次管理员只能对系统进行部分操作.
  次管理员的授权来自主管理员.
  次管理员不能对主管理员, 次管理员进行账号管理.
  次管理员根据授权可以对观察者进行账号管理.
  次管理员包含完全观察者或部分观察者权限.
  用户不能直接登录为次管理员, 必须首先登录为观察者, 然后通过切换角色功能提权.

+ **`watcher`**: 观察者.
  只能对系统进行只读的访问, 即只能观察系统运行状态, 读取系统数据, 而不能进行任何修改操作.
  观察者可细分为完全观察者 (能查看全部系统状态), 部分观察者 (只能观察一部分状态).

+ **`nobody`**: 未登录.
  未登录系统, 此时唯一允许的访问是访问登录接口.

+ **`um`**: 上位机软件 (fmrf-um).
  用于上位机软件接入系统.
  此权限角色通过证书/密钥方式认证, 不支持用户名/密码方式认证.

+ **`server`**: 对等的另一个 fmrf-server, 用于高可用配置.
  此权限角色通过证书/密钥方式认证, 不支持用户名/密码方式认证.

+ **`media`**: 媒体服务 (fmrf-media) 专用.
  此权限角色通过证书/密钥方式认证, 不支持用户名/密码方式认证.


TODO
